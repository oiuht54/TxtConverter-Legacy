<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ProgressBar?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<VBox xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="TartarusCore.TxtConverter.MainController" styleClass="root">

    <HBox fx:id="titleBar" alignment="CENTER_LEFT" spacing="10" styleClass="custom-title-bar">
        <padding>
            <Insets left="10.0"/>
        </padding>
        <Label fx:id="lblTitle" text="TXT File Converter" styleClass="title-label"/>
        <Region HBox.hgrow="ALWAYS"/>

        <Button onAction="#handleSettings" styleClass="window-button" text="⚙"/>

        <Button fx:id="minimizeBtn" onAction="#handleMinimize" styleClass="window-button" text="_"/>
        <Button fx:id="closeBtn" onAction="#handleClose" styleClass="window-button,close-button" text="X"/>
    </HBox>

    <BorderPane VBox.vgrow="ALWAYS">
        <padding>
            <Insets bottom="10.0" left="10.0" right="10.0" top="10.0"/>
        </padding>
        <top>
            <VBox spacing="10.0" BorderPane.alignment="CENTER">
                <children>
                    <Label text="Configuration">
                        <font>
                            <Font name="System Bold" size="16.0"/>
                        </font>
                    </Label>
                    <HBox alignment="CENTER_LEFT" spacing="10.0">
                        <children>
                            <Label fx:id="lblSourceDir" text="Source Folder:" HBox.hgrow="NEVER"/>
                            <TextField fx:id="sourceDirField" editable="false" HBox.hgrow="ALWAYS"/>
                            <Button fx:id="selectSourceBtn" onAction="#handleSelectSource" text="Select..."/>
                        </children>
                    </HBox>
                    <HBox alignment="CENTER_LEFT" spacing="10.0">
                        <children>
                            <Label fx:id="lblPreset" text="Preset:"/>
                            <ComboBox fx:id="presetComboBox" prefWidth="150.0"/>
                        </children>
                    </HBox>
                    <HBox alignment="CENTER_LEFT" spacing="10.0">
                        <children>
                            <Label fx:id="lblExtensions" text="Extensions:" HBox.hgrow="NEVER"/>
                            <TextField fx:id="extensionsField" promptText="e.g. java, xml" HBox.hgrow="ALWAYS"/>
                        </children>
                    </HBox>
                    <HBox alignment="CENTER_LEFT" spacing="10.0">
                        <children>
                            <Label fx:id="lblIgnored" text="Ignored Folders:" HBox.hgrow="NEVER"/>
                            <TextField fx:id="ignoredFoldersField" promptText="e.g. target, .git" HBox.hgrow="ALWAYS"/>
                            <Button fx:id="rescanBtn" onAction="#handleRescan" text="Rescan"/>
                        </children>
                    </HBox>

                    <!-- Группировка чекбоксов структуры -->
                    <HBox spacing="15.0" alignment="CENTER_LEFT">
                        <CheckBox fx:id="generateStructureFileCheckbox" text="Generate Structure"/>
                        <CheckBox fx:id="compactStructureCheckbox" text="Compact Mode" selected="true"/>
                    </HBox>

                    <!-- Новый чекбокс умного сжатия -->
                    <HBox spacing="10.0" alignment="CENTER_LEFT">
                        <Label fx:id="lblCompression" text="Compression:"/>
                        <ComboBox fx:id="compressionComboBox" prefWidth="220.0"/>
                    </HBox>

                    <HBox alignment="CENTER_LEFT" spacing="10.0">
                        <CheckBox fx:id="generateMergedFileCheckbox" selected="true" text="Generate Merged File"/>
                        <Button fx:id="selectFilesBtn" onAction="#handleSelectFiles" text="Select Files..."/>
                    </HBox>

                    <Button fx:id="convertBtn" maxWidth="Infinity" onAction="#handleConvert" text="START CONVERSION"/>
                </children>
            </VBox>
        </top>
        <center>
            <VBox spacing="5.0" BorderPane.alignment="CENTER">
                <BorderPane.margin>
                    <Insets top="15.0"/>
                </BorderPane.margin>
                <children>
                    <Label fx:id="lblLog" text="Log:">
                        <font>
                            <Font name="System Bold" size="14.0"/>
                        </font>
                    </Label>
                    <TextArea fx:id="logArea" editable="false" VBox.vgrow="ALWAYS"/>

                    <HBox spacing="10.0" alignment="CENTER_LEFT">
                        <Label fx:id="statusLabel" text="Ready" HBox.hgrow="ALWAYS" maxWidth="Infinity"/>
                        <ProgressBar fx:id="progressBar" progress="0.0" prefWidth="200.0"/>
                    </HBox>
                </children>
            </VBox>
        </center>
    </BorderPane>
</VBox>